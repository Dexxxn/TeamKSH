<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.ksh.mapper.PatientMapper">
  
	<insert id="patientreg"> 
		insert into patient(p_name, p_no, p_addr, p_phone, p_visit,p_chart) 
		values(#{p_name},#{p_no},#{p_addr}, #{p_phone}, "F", #{p_chart});
	</insert>  
	
	
	<select id="secondVisit_patient" resultType="com.ksh.model.PatientVO">
  	<!-- 	select p_name, p_no, p_phone, p_addr
  		from patient
  		where p_name=#{p_name} and p_no=#{p_no}; -->
  		select p_name, p_no, p_phone, p_addr
  		from patient
  		where p_name=#{p_name} and substring(#{p_no},1,6);
  		
  	</select>
  	
  	
  	<insert id="reserve">
		insert into schedule(s_type, s_date, s_startTime, s_endTime, s_memo, s_patient, s_doctor)
		values("OC", #{s_date}, #{s_startTime}, #{s_endTime}, #{s_memo}, #{s_patient}, #{s_doctor});  <!-- 진료 OC -->
	 </insert>   
	
  	
  
  </mapper>